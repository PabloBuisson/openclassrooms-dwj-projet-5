{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}
{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('css/home.css') }}">
{% endblock %}

{% block body %}

    <div class="container main-section">

    {% if not app.user %}

        <h1>Bienvenue !</h1>

        <p>Blablabla</p>

    {% else %}

    {% if cards is empty and count == 0 %}
        <div class="row">
            <div class="col-10 offset-1 col-md-8 offset-md-2 text-center message-home mt-5">
                <span class="fa fa-frown-o message-icon mt-5" aria-hidden="true"></span>
                <p class="message-text mt-3">Pas de cartes prévues aujourd'hui !</p>
                {% if deck is empty %}
                    <p class="message-reminder mt-3">Oups, vous n'avez aucune carte à réviser. Profitez-en pour créer vos <a href="{{ path('easyadmin', {entity: 'Card', action: 'new'}) }}">premières cartes</a> !</p>
                {% else %}
                    <p class="message-reminder mt-3">Oups, vous n'avez aucune carte à réviser. Profitez-en pour créer de <a href="{{ path('easyadmin', {entity: 'Card', action: 'new'}) }}">nouvelles cartes</a> !</p>
                {% endif %}
            </div>
        </div>
    {% elseif cards is empty and count > 0 %}
        <div class="row">
            <div class="col-10 offset-1 col-md-8 offset-md-2 text-center message-home mt-5">
                <span class="fa fa-check-circle message-icon mt-5" aria-hidden="true"></span>
                <p class="message-text mt-3">Plus de cartes à réviser, bravo !</p>
                <p class="message-reminder mt-3">N'oubliez pas que vous pouvez augmenter votre <a href="{{ path('easyadmin', {entity: 'User', action: 'list'}) }}">limite quotidienne</a> ou créer de <a href="{{ path('easyadmin', {entity: 'Card', action: 'new'}) }}">nouvelles cartes</a> !</p>
            </div>
        </div>
    {% endif %}
    
            
        <div class="row mt-5">
            {% for card in cards %}
                {% if loop.first %}
                    <div id="card-container" class="col-md-10 offset-md-1 col-lg-8 offset-lg-2">
                        <article class="card-user text-center p-5">
                            <div class="row">
                                <div class="order-2 col-12 order-md-1 col-md text-center text-md-left mb-3 mt-2 mt-md-n3">
                                {% for tag in card.tags %}
                                    <div class="d-inline-block tag-user">{{ tag.name | upper }}</div>
                                {% endfor %}
                                </div>
                                <div class="order-1 col-12 order-md-2 col-md text-center text-md-right mb-3 mt-n3 count-user"><span class="user-count">{{ due }}</span><span class="fa fa-clock-o d-inline-block ml-1" aria-hidden="true"></span> | <span class="user-limit">{{ count }}</span><span class="fa fa-check d-inline-block ml-1" aria-hidden="true"></span></div>
                            </div>
                            <p class="card-content mt-5">{{ card.recto }}</p>
                            <button type="button" id="btn-answer" class="btn btn-info mt-1 mb-5">Voir la réponse</button>
                            
                            <div id="verso-container">
                                <hr>
                                <p class="card-content">{{ card.verso }}</p>
                                <div class="card-form mt-5 position-relative">
                                    {{ form_start(formCard, {'attr': {'id': 'form-card' }}) }}

                                    <input type="hidden" name="card-id" value="{{ card.id }}">

                                    {{ form_end(formCard) }}
                                </div>
                            </div>
                        </article>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

    {% endif %}

    </div>

{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/home.js') }}"></script>
{% endblock %}